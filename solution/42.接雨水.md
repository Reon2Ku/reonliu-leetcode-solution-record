# 42.接雨水

给定 `n` 个非负整数表示每个宽度为 `1` 的柱子的高度图，计算按此排列的柱子，下雨之后能接多少雨水。

 

**示例 1：**

![img](https://assets.leetcode-cn.com/aliyun-lc-upload/uploads/2018/10/22/rainwatertrap.png)

```
输入：height = [0,1,0,2,1,0,1,3,2,1,2,1]
输出：6
解释：上面是由数组 [0,1,0,2,1,0,1,3,2,1,2,1] 表示的高度图，在这种情况下，可以接 6 个单位的雨水（蓝色部分表示雨水）。 
```

**示例 2：**

```
输入：height = [4,2,0,3,2,5]
输出：9
```

 

**提示：**

- `n == height.length`
- `1 <= n <= 2 * 104`
- `0 <= height[i] <= 105`



## 题解

我草好爽，纯靠自己写出来的hard题。我真是太牛逼了

虽然仅仅从单调栈的思路来看的话，这道题最多也就medium水平吧

~~~
class Solution {
public:
    int trap(vector<int>& height) {
        vector<int> result(height.size(),-1);
        stack<int> sta;
        for(int i=0;i<height.size();i++)
        {
            if(sta.empty() || height[i]<=height[sta.top()])
            {
                sta.push(i);
                continue;
            }
            while(!sta.empty()&&height[i]>height[sta.top()])
            {
                result[sta.top()] = i;
                sta.pop();
            }
            sta.push(i);
        }

        // for(int i=0;i<result.size();i++)
        // {
        //     cout<<result[i]<<endl;
        // }
        int count = 0;
        bool flag = false;//flag为true时，表示已经碰到了height中最高的那一竖条
        //result[i]==-1时，之后的所有列一定低于这一列
        while(count<height.size()&&height[count]==0) count++;
        int rainWater = 0;
        int index = 0;
        for(int i=count;i<height.size();i++)
        {
            if(flag)
            {
                if(result[i]!=-1) continue;
                for(int j=i;j>index;j--)
                {
                    rainWater+=height[i]-height[j];
                }
                index = i;
            }
            else
            {
                if(result[i]==-1) 
                {
                    flag = true;
                    index = i;
                    continue;
                }
                for(int j=i;j<result[i];j++)
                {
                    rainWater+=height[i]-height[j];
                }
                i = result[i]-1;
            }
        }
        return rainWater;
    }
};
~~~

