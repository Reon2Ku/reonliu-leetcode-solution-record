# 67.二进制求和

## 题目描述

给你两个二进制字符串 `a` 和 `b` ，以二进制字符串的形式返回它们的和。

 

**示例 1：**

```
输入:a = "11", b = "1"
输出："100"
```

**示例 2：**

```
输入：a = "1010", b = "1011"
输出："10101"
```

 

**提示：**

- `1 <= a.length, b.length <= 104`
- `a` 和 `b` 仅由字符 `'0'` 或 `'1'` 组成
- 字符串如果不是 `"0"` ，就不含前导零



## 题解

自己写的第一版，性能相当差

性能开销主要集中在更新result上，尾部加单词效率很高O(1)，但是前面加单词效率很低O(N)，可以考虑先计算反向的结果，最后reverse

~~~
class Solution {
public:
    string addBinary(string a, string b) {
        string longer;
        string shorter;
        string result = "";
        int jinwei = 0;
        if(a.size()>=b.size())
        {
            longer = a;
            shorter = b;
        }
        else 
        {
            longer = b;
            shorter = a;
        }
        while(shorter.size()<longer.size())
        {
            shorter = "0"+shorter;
        }
        //cout<<longer<<endl<<shorter<<endl;
        for(int i=longer.size()-1;i>=0;i--)
        {
            int sum = (longer[i]-'0') + (shorter[i]-'0') + jinwei;
            if(sum == 0) 
            {
                result = "0"+result;
                jinwei = 0;
            }
            else if(sum==1)
            {
                result = "1"+result;
                jinwei = 0;
            }
            else if(sum==2)
            {
                result = "0"+result;
                jinwei = 1;
            }
            else if(sum==3)
            {
                result = "1"+result;
                jinwei = 1;
            }
        }
        if(jinwei==1) result = "1"+result;
        return result;
    }
};
~~~

确切说，时间复杂度过高的根源来自于string之间相加。

另一版中使用了尾插char元素的办法，时间复杂度大大缩小。

虽然以下这版也是我看了标准答案之后复现的

~~~
class Solution {
public:
    string addBinary(string a, string b) {
        int ia = a.size()-1;
        int ib = b.size()-1;
        int jinwei = 0;
        string result;
        while(ia>=0 || ib>=0)
        {
            int sum = 0;
            if(ia>=0)
            {
                sum+=a[ia--]-'0';
            }
            if(ib>=0)
            {
                sum+=b[ib--]-'0';
            }
            sum+=jinwei;
            jinwei = sum/2;
            result.push_back(sum%2+'0');
        }
        if(jinwei) result.push_back('1');
        reverse(result.begin(),result.end());
        return result;
    }
};
~~~

